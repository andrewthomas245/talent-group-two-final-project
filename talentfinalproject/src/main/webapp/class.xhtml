<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<f:metadata>
	<f:viewAction action="#{classController.fetchAll}" />
</f:metadata>

<h:head>
	<script>
		function myFunction() {
			confirm("Are u sure?");
		}
	</script>
</h:head>
<h:body>

	<br />

	<table align="center" border="0" width="600" cellspacing="10">
		<tr>
			<td>User:</td>
			<td>Kyaw Kyaw Latt</td>
			<td>Current Date:</td>
			<td><p:clock pattern="yyyy/MM/dd HH:mm:ss" /></td>
			<td><p:commandButton type="button" value="Logout"
					icon="pi pi-home" /></td>
		</tr>
	</table>

	<br />

	<h:form style="float: left; width: 200px; margin-left: 50px;">
		<p:menu>
			<p:submenu label="Classes">
				<p:menuitem value="Manage Classes" url="/class.xhtml"
					icon="pi pi-users" />
			</p:submenu>
			<p:submenu label="Students">
				<p:menuitem value="Manage Students" url="/student.xhtml"
					icon="pi pi-user" />
			</p:submenu>
			<p:submenu label="Users">
				<p:menuitem value="Manage Users" url="/user.xhtml" icon="pi pi-key" />
			</p:submenu>
		</p:menu>
	</h:form>

	<h:form style="float: left; width: 1200px;">
		<p:growl id="growl" showDetail="true" sticky="true"
			rendered="#{not facesContext.validationFailed}" />
		<p:panel>
			<f:facet name="header">
                Class Form
                <p:commandButton icon="pi pi-refresh"
					update="classform" process="@this" style="margin-right:20px;">
					<p:resetInput target="classform" />
				</p:commandButton>
			</f:facet>
			<h:panelGrid columns="3" id="classform">
				<p:outputLabel for="classid" value="Class ID" />
				<p:inputText id="classid"
					value="#{classController.stuclass.stuclass_id}" required="true"
					validatorMessage="The input does not match the pattern 'CL' + six numbers.">
					<f:validateRegex pattern="^CL[0-9]{3,3}$" />
				</p:inputText>
				<p:message for="classid" />
				<p:outputLabel for="classname" value="Class Name" />
				<p:inputText id="classname" value="#{classController.stuclass.name}"
					required="true">
				</p:inputText>
				<p:message for="classname" />
				<p:outputLabel />
				<p:commandButton value="Save" validateClient="true"
					onclick="myFunction()" action="#{classController.save()}"
					update="@form" process="@parent" />
			</h:panelGrid>
		</p:panel>

		<br />

		<p:panel>
			<f:facet name="header">
                Classes
                <p:commandButton action="#{classController.fetchAll()}"
					icon="pi pi-refresh" update="@form" process="@this" />
			</f:facet>
			<p:dataTable var="stuclass" value="#{classController.stuclasses}"
				rows="10" paginator="true">
				<p:column headerText="Options" width="10%">
					<p:commandButton icon="pi pi-pencil"
						action="#{classController.edit(stuclass)}" update="@form"
						process="@this" />
					<p:commandButton icon="pi pi-trash" onclick="myFunction()"
						action="#{classController.delete(stuclass)}" update="@form"
						process="@this" />
				</p:column>
				<p:column headerText="Id">
					<h:outputText value="#{stuclass.stuclass_id}" />
				</p:column>

				<p:column headerText="Class Name">
					<h:outputText value="#{stuclass.name}" />
				</p:column>
			</p:dataTable>
		</p:panel>
	</h:form>

</h:body>
</html>